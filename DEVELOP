


Release process
======================

We don't need Twine, since Poetry already has publish commands.


Initial setup
-----------------

You must first register testpypi as a valid package store in Poetry::

    $ poetry config repositories.testpypi https://test.pypi.org/legacy/

Check it then with::

    $ poetry config --list


Reformatting code
-----------------------

Command to use from repository root::

    black -l 120 src tests


Publishing a new version
------------------------------

Issue::

    $ poetry build
    $ poetry publish -r testpypi

Then test this preview package in some project using the wacryptolib::

    $ python -m pip install -U --index-url https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple/ wacryptolib

When all is verified on testpypi (Readme, files uploaded etc.), release the real version to pypi::

    $ poetry publish
